2026/01/09 13:46:57 === GoPeep started at 2026-01-09T13:46:57+01:00 ===
2026/01/09 13:46:57 Received room code from server: RED-GATE-923
2026/01/09 13:46:57 InitializeTrackSlots: Creating 4 pre-allocated track slots with codec video/VP8
2026/01/09 13:46:57 InitializeTrackSlots: Created slot 0 (trackID=video0, streamID=gopeep-stream-0)
2026/01/09 13:46:57 InitializeTrackSlots: Created slot 1 (trackID=video1, streamID=gopeep-stream-1)
2026/01/09 13:46:57 InitializeTrackSlots: Created slot 2 (trackID=video2, streamID=gopeep-stream-2)
2026/01/09 13:46:57 InitializeTrackSlots: Created slot 3 (trackID=video3, streamID=gopeep-stream-3)
2026/01/09 13:46:57 InitializeTrackSlots: All 4 track slots ready
2026/01/09 13:46:57 Signal server starting on :8080
2026/01/09 13:46:59 Viewer joined room RED-GATE-923 (total viewers: 1)
2026/01/09 13:46:59 CreateOffer: Using pre-allocated slots (4 tracks)
2026/01/09 13:46:59 Peer viewer-1 connection state: connecting
2026/01/09 13:47:00 Peer viewer-1 connection state: connected
2026/01/09 13:47:01 Quick Share: Starting with window 336381 (Ghostty - ./gopeep --local)
2026/01/09 13:47:01 ActivateSlot: Activated video0 for window 336381 (Ghostty - ./gopeep --local)
2026/01/09 13:47:02 Broadcasting sharer-started to room RED-GATE-923
2026/01/09 13:47:02 Focus detection loop started with 1 pipelines:
2026/01/09 13:47:02   - Track video0: windowID=336381, name=./gopeep --local
2026/01/09 13:47:02 Renegotiating with 1 peers
2026/01/09 13:47:02 Renegotiation: peer viewer-1 signaling state: stable
2026/01/09 13:47:02 Renegotiation: peer viewer-1 connection state: connected
2026/01/09 13:47:02 Renegotiation: ICE gathering complete for viewer-1
2026/01/09 13:47:02 Renegotiation: sending offer to peer viewer-1 (SDP length: 16892)
2026/01/09 13:47:02 Renegotiation: sending offer to peer viewer-1
2026/01/09 13:47:02 Renegotiation: sent streams-info with 1 tracks to peer viewer-1
2026/01/09 13:47:02 Viewer joined room RED-GATE-923 (total viewers: 1)
2026/01/09 13:47:02 CreateOffer: Using pre-allocated slots (4 tracks)
2026/01/09 13:47:02 Failed to add ICE candidate for viewer-2: InvalidStateError: remote description is not set
2026/01/09 13:47:02 Renegotiation: received answer from peer viewer-2, setting remote description
2026/01/09 13:47:02 Renegotiation: complete for peer viewer-2, signaling state: stable, connection state: new
2026/01/09 13:47:02 Peer viewer-2 connection state: connecting
2026/01/09 13:47:02 sendLoop: Writing frame 1 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:02 Topmost captured window changed to: 336381 (was 0)
2026/01/09 13:47:02 Focus set to track=video0, windowID=336381, name=./gopeep --local
2026/01/09 13:47:02 Calling NotifyFocusChange for track: video0
2026/01/09 13:47:02 NotifyFocusChange: callback exists, calling with trackID: video0
2026/01/09 13:47:02 Focus change callback triggered for track: video0
2026/01/09 13:47:02 Size change callback triggered for track video0: 1050x700
2026/01/09 13:47:03 Peer viewer-2 connection state: connected
2026/01/09 13:47:05 sendLoop: Writing frame 101 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:05 TUI: Adding window dynamically: 312846 (Save settings)
2026/01/09 13:47:05 AddWindowDynamic: Using fast path (pre-allocated slots)
2026/01/09 13:47:05 ActivateSlot: Activated video1 for window 312846 (Arc - Save settings)
2026/01/09 13:47:06 AddWindowDynamic: Notifying stream activated video1 (NO renegotiation)
2026/01/09 13:47:06 Broadcasting stream-activated: video1 (fast path)
2026/01/09 13:47:06 Added window dynamically: video1 (windowID=312846, fastPath=true)
2026/01/09 13:47:06 Topmost captured window changed to: 312846 (was 336381)
2026/01/09 13:47:06 Focus set to track=video1, windowID=312846, name=Save settings
2026/01/09 13:47:06 Calling NotifyFocusChange for track: video1
2026/01/09 13:47:06 NotifyFocusChange: callback exists, calling with trackID: video1
2026/01/09 13:47:06 Focus change callback triggered for track: video1
2026/01/09 13:47:06 sendLoop: Writing frame 1 to track video1 (windowID=312846, streamID=gopeep-stream-1)
2026/01/09 13:47:07 sendLoop: Writing frame 201 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:08 Peer viewer-1 connection state: disconnected
2026/01/09 13:47:08 Peer viewer-1 connection state: closed
2026/01/09 13:47:08 Viewer joined room RED-GATE-923 (total viewers: 1)
2026/01/09 13:47:08 CreateOffer: Using pre-allocated slots (4 tracks)
2026/01/09 13:47:08 Peer viewer-3 connection state: connecting
2026/01/09 13:47:08 sendLoop: Writing frame 101 to track video1 (windowID=312846, streamID=gopeep-stream-1)
2026/01/09 13:47:08 sendLoop: Writing frame 301 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:09 Peer viewer-3 connection state: connected
2026/01/09 13:47:10 Viewer joined room RED-GATE-923 (total viewers: 1)
2026/01/09 13:47:10 CreateOffer: Using pre-allocated slots (4 tracks)
2026/01/09 13:47:10 Peer viewer-4 connection state: connecting
2026/01/09 13:47:10 sendLoop: Writing frame 201 to track video1 (windowID=312846, streamID=gopeep-stream-1)
2026/01/09 13:47:10 sendLoop: Writing frame 401 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:11 Peer viewer-4 connection state: connected
2026/01/09 13:47:12 Topmost captured window changed to: 336381 (was 312846)
2026/01/09 13:47:12 Focus set to track=video0, windowID=336381, name=./gopeep --local
2026/01/09 13:47:12 Calling NotifyFocusChange for track: video0
2026/01/09 13:47:12 NotifyFocusChange: callback exists, calling with trackID: video0
2026/01/09 13:47:12 Focus change callback triggered for track: video0
2026/01/09 13:47:12 sendLoop: Writing frame 301 to track video1 (windowID=312846, streamID=gopeep-stream-1)
2026/01/09 13:47:12 sendLoop: Writing frame 501 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:13 Topmost captured window changed to: 312846 (was 336381)
2026/01/09 13:47:13 Focus set to track=video1, windowID=312846, name=Save settings
2026/01/09 13:47:13 Calling NotifyFocusChange for track: video1
2026/01/09 13:47:13 NotifyFocusChange: callback exists, calling with trackID: video1
2026/01/09 13:47:13 Focus change callback triggered for track: video1
2026/01/09 13:47:13 Peer viewer-2 connection state: disconnected
2026/01/09 13:47:13 Peer viewer-2 connection state: closed
2026/01/09 13:47:14 sendLoop: Writing frame 401 to track video1 (windowID=312846, streamID=gopeep-stream-1)
2026/01/09 13:47:14 sendLoop: Writing frame 601 to track video0 (windowID=336381, streamID=gopeep-stream-0)
2026/01/09 13:47:15 Peer viewer-3 connection state: disconnected
2026/01/09 13:47:15 Peer viewer-3 connection state: closed
2026/01/09 13:47:16 Topmost captured window changed to: 336381 (was 312846)
2026/01/09 13:47:16 Focus set to track=video0, windowID=336381, name=./gopeep --local
2026/01/09 13:47:16 Calling NotifyFocusChange for track: video0
2026/01/09 13:47:16 NotifyFocusChange: callback exists, calling with trackID: video0
2026/01/09 13:47:16 Focus change callback triggered for track: video0
2026/01/09 13:47:16 Focus detection loop stopped
2026/01/09 13:47:16 Broadcasting stream-removed: video1
2026/01/09 13:47:16 Broadcasting stream-removed: video0
2026/01/09 13:47:16 Peer viewer-4 connection state: closed
